# BaseApi - WebAPI .NET 8

Proyecto WebAPI creado con .NET 8 y controladores.

## Generaci√≥n del Proyecto

El proyecto fue generado usando los siguientes comandos:

```bash
# Crear carpeta del proyecto
mkdir base && cd base

# Generar proyecto WebAPI .NET 8 con controladores
dotnet new webapi -n BaseApi --framework net8.0 --use-controllers
```

## Estructura del Proyecto

```
BaseApi/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îî‚îÄ‚îÄ WeatherForecastController.cs
‚îú‚îÄ‚îÄ Properties/
‚îÇ   ‚îî‚îÄ‚îÄ launchSettings.json
‚îú‚îÄ‚îÄ BaseApi.csproj
‚îú‚îÄ‚îÄ BaseApi.http
‚îú‚îÄ‚îÄ Program.cs
‚îú‚îÄ‚îÄ WeatherForecast.cs
‚îú‚îÄ‚îÄ appsettings.json
‚îî‚îÄ‚îÄ appsettings.Development.json
```

## Ejecutar el Proyecto

```bash
cd BaseApi
dotnet run
```

## Endpoints Disponibles

### Autenticaci√≥n
- `POST /api/auth/login` - Iniciar sesi√≥n de usuario
- `POST /api/auth/register` - Registrar nuevo usuario

### Mantenedor de Usuarios (Requiere autenticaci√≥n JWT)
- `GET /api/users` - Obtiene todos los usuarios
- `GET /api/users/{id}` - Obtiene un usuario por ID
- `POST /api/users` - Crea un nuevo usuario
- `PUT /api/users/{id}` - Actualiza un usuario existente
- `PATCH /api/users/{id}/activate` - Activa un usuario (dar de alta)
- `PATCH /api/users/{id}/deactivate` - Desactiva un usuario (dar de baja)
- `DELETE /api/users/{id}` - Elimina un usuario permanentemente

### Otros
- `GET /WeatherForecast` - Obtiene datos de ejemplo del clima

## Interfaz Web - Progressive Web App (PWA)

El proyecto incluye una **Progressive Web App** completa con:
- **Shadow DOM Components** - Componentes reutilizables encapsulados
- **HTML5, CSS3, JavaScript** - Tecnolog√≠as web est√°ndar modernas
- **Responsive Design** - Adaptable a dispositivos m√≥viles y tablets
- **JWT Authentication** - Integraci√≥n completa con la API
- **Funcionalidad Offline** - Cach√© inteligente con Service Worker
- **Instalable** - Se puede instalar como aplicaci√≥n nativa
- **Notificaciones Push** - Soporte para notificaciones del sistema
- **Actualizaciones Autom√°ticas** - Gesti√≥n de versiones transparente

### P√°ginas Disponibles
- `/` - P√°gina de login con componente Shadow DOM
- `/dashboard.html` - Panel de control (requiere autenticaci√≥n)
- `/offline.html` - P√°gina mostrada cuando no hay conexi√≥n
- `/generate-icons.html` - Generador de iconos PWA
- `/swagger` - Documentaci√≥n de la API

### Componentes Shadow DOM
- `<login-component>` - Componente de autenticaci√≥n con login y registro

### Caracter√≠sticas PWA
- **üì± Instalaci√≥n**: Se puede instalar desde el navegador como app nativa
- **üîÑ Service Worker**: Cach√© inteligente para funcionalidad offline
- **üì§ Offline First**: Funciona sin conexi√≥n a internet
- **üîî Notificaciones**: Soporte para push notifications
- **üöÄ Performance**: Carga r√°pida con cach√© estrat√©gico
- **üì≤ App-like**: Experiencia similar a aplicaci√≥n nativa
- **üîÑ Actualizaciones**: Sistema autom√°tico de actualizaciones
- **üé® Iconos**: Iconos adaptativos para todos los dispositivos

### Instalaci√≥n PWA
1. **Navegador**: Aparecer√° banner de instalaci√≥n autom√°ticamente
2. **Manual**: Ctrl+Shift+I para forzar instalaci√≥n (testing)
3. **M√≥vil**: "Agregar a pantalla de inicio" desde el men√∫ del navegador
4. **Desktop**: "Instalar BaseApi" desde la barra de direcciones

### Uso de la Interfaz Web
1. **Registro de usuario**: Completa todos los campos incluyendo confirmaci√≥n de contrase√±a
2. **Login**: Usa las credenciales creadas durante el registro
3. **Dashboard**: Despu√©s del login exitoso, accede al panel de control
4. **Gesti√≥n**: Usa los endpoints protegidos desde el dashboard

### Validaciones Implementadas
- **Email v√°lido**: Formato de email correcto
- **Contrase√±a**: M√≠nimo 6 caracteres
- **Confirmaci√≥n**: Las contrase√±as deben coincidir
- **Campos √∫nicos**: Username y email deben ser √∫nicos en el sistema

## Comandos Bash Utilizados

### Clasificaci√≥n .NET
```bash
# Generar proyecto WebAPI .NET 8 con controladores
dotnet new webapi -n BaseApi --framework net8.0 --use-controllers

# Restaurar paquetes
dotnet restore

# Compilar el proyecto
dotnet build

# Limpiar build
dotnet clean

# Ejecutar el proyecto
dotnet run

# Instalar paquetes Entity Framework Core
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools
dotnet add package Microsoft.EntityFrameworkCore.Design

# Instalar paquetes de autenticaci√≥n JWT
dotnet add package System.IdentityModel.Tokens.Jwt --version 8.13.0
dotnet add package BCrypt.Net-Next --version 4.0.3
dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer --version 8.0.11

# Crear estructura de archivos web
mkdir -p wwwroot/components wwwroot/css wwwroot/js

# Crear estructura para PWA
mkdir -p wwwroot/images

# Comandos de mantenimiento autom√°tico
dotnet build --configuration Release
dotnet test --logger trx --collect:"XPlat Code Coverage"
dotnet format --verify-no-changes
```

### Clasificaci√≥n EF-Core
```bash
# Crear migraci√≥n inicial de Entity Framework
dotnet ef migrations add InitialCreate

# Aplicar migraci√≥n a la base de datos
dotnet ef database update
```

### Clasificaci√≥n Git
```bash
# Inicializar repositorio git local
git init

# Configurar remoto con usuario theBigMocho
git remote add origin https://github.com/theBigMocho/BaseApi.git

# Agregar todos los archivos al staging
git add .

# Verificar estado del repositorio
git status

# Crear commit inicial
git commit -m "Initial commit - BaseApi ASP.NET Core WebAPI project"

# Crear repositorio remoto usando GitHub CLI
gh repo create BaseApi --public --description "ASP.NET Core WebAPI con Entity Framework Core, archivos est√°ticos y componentes Shadow DOM"

# Push inicial al remoto y establecer tracking
git push -u origin master

# Remover archivos obj/ del repositorio (ya estaban commitados)
git rm -r --cached obj/

# Agregar .gitignore y cambios en documentaci√≥n
git add .gitignore CLAUDE.md README.md

# Push de cambios
git push

# Commits autom√°ticos con descripci√≥n basada en cambios
# (Cuando se solicite commit y push, se analizar√°n los cambios y se crear√° un mensaje descriptivo autom√°ticamente)
```

### Clasificaci√≥n SQL
```bash
# Listar instancias de SQL Server en el sistema
sqlcmd -L

# Probar conexi√≥n a instancia por defecto
sqlcmd -S . -E -Q "SELECT @@SERVERNAME, @@VERSION"

# Probar conexi√≥n a localhost
sqlcmd -S localhost -E -Q "SELECT @@SERVERNAME, @@VERSION"

# Probar conexi√≥n a LocalDB con autenticaci√≥n Windows
sqlcmd -S "(localdb)\\MSSQLLocalDB" -E -Q "SELECT @@SERVERNAME, @@VERSION"

# Probar conexi√≥n a SQL Server 2022 con usuario sa
sqlcmd -S ".\\SQLSERVER2022" -U sa -P mocho -Q "SELECT @@SERVERNAME, @@VERSION"
```

### Clasificaci√≥n Mantenimiento Autom√°tico
```bash
# Testing y Calidad
dotnet test --logger trx --collect:"XPlat Code Coverage"
dotnet format --verify-no-changes
dotnet format --include "**/*.cs"

# An√°lisis de c√≥digo
dotnet build --configuration Release --verbosity normal
dotnet clean && dotnet restore && dotnet build

# Seguridad y Dependencias
dotnet list package --outdated
dotnet list package --vulnerable
dotnet add package <PackageName> --version <LatestVersion>

# Documentaci√≥n autom√°tica
dotnet build-server shutdown
dotnet tool install -g dotnet-reportgenerator-globaltool

# Base de datos - Mantenimiento
dotnet ef database drop --force
dotnet ef database update
dotnet ef migrations list

# Performance y Monitoreo
dotnet run --configuration Release
dotnet publish --configuration Release --output ./publish

# Limpieza autom√°tica
dotnet clean
dotnet nuget locals all --clear

# Health checks y validaci√≥n
curl -X GET "http://localhost:5012/api/users" -H "Authorization: Bearer <token>"
curl -X POST "http://localhost:5012/api/auth/login" -H "Content-Type: application/json"
```

## Tecnolog√≠as

- .NET 8
- ASP.NET Core WebAPI
- Swagger/OpenAPI
- Entity Framework Core
- SQL Server 2022 Express
- JWT Authentication
- BCrypt Password Hashing

## Configuraci√≥n de Base de Datos

El proyecto est√° configurado para usar SQL Server 2022 con:
- Servidor: `.\\SQLSERVER2022`
- Base de datos: `BaseApi`
- Usuario: `sa`
- Contrase√±a: `mocho`

## Permisos Otorgados a Claude Code

Durante el desarrollo de este proyecto, se han otorgado los siguientes permisos y capacidades a Claude Code:

### üóÇÔ∏è Sistema de Archivos
- **Crear archivos**: Crear nuevos archivos (.cs, .html, .css, .js, .json, .md)
- **Leer archivos**: Leer contenido de archivos existentes para an√°lisis y modificaci√≥n
- **Escribir archivos**: Modificar y actualizar archivos existentes
- **Crear directorios**: Crear estructura de carpetas (wwwroot, components, css, js, etc.)
- **Navegar estructura**: Explorar y analizar la estructura de directorios del proyecto

### ‚öôÔ∏è Gesti√≥n de Procesos
- **Ejecutar procesos**: Iniciar aplicaciones (.NET, SQL Server, etc.)
- **Finalizar procesos**: Terminar procesos en ejecuci√≥n (taskkill de BaseApi.exe)
- **Monitorear procesos**: Verificar estado de procesos (tasklist)
- **Gesti√≥n de puertos**: Controlar aplicaciones en puertos espec√≠ficos (localhost:5012)

### üóÑÔ∏è Base de Datos
- **Conexiones SQL**: Conectar y probar conexiones a SQL Server 2022
- **Ejecutar consultas**: Verificar versi√≥n y estado del servidor (SELECT @@VERSION)
- **Migraciones EF Core**: Crear y aplicar migraciones de Entity Framework
- **Operaciones CRUD**: Gestionar usuarios y datos a trav√©s de la API

### üåê Red y APIs
- **Peticiones HTTP**: Realizar llamadas a endpoints de la API
- **Configuraci√≥n de servidores**: Configurar servidor web para archivos est√°ticos
- **Gesti√≥n de URLs**: Configurar rutas y endpoints
- **Integraci√≥n con servicios**: Configurar JWT, autenticaci√≥n, CORS

### üìù Control de Versiones (Git)
- **Inicializaci√≥n**: Inicializar repositorios git
- **Gesti√≥n de archivos**: git add, git status, verificaci√≥n de cambios
- **Commits**: Crear commits con mensajes descriptivos
- **Push/Pull**: Sincronizar con repositorios remotos
- **Configuraci√≥n remota**: Configurar origin y upstream
- **GitHub CLI**: Crear repositorios usando gh CLI

### üíª Terminal/Bash y Herramientas CLI
- **Comandos .NET**: dotnet build, run, restore, clean, new, add package
- **Entity Framework**: dotnet ef migrations, database update
- **SQL Server**: sqlcmd para pruebas de conexi√≥n
- **Gesti√≥n de paquetes**: Instalaci√≥n de NuGet packages
- **GitHub CLI**: Comandos gh para gesti√≥n de repositorios
- **Gesti√≥n de directorios**: mkdir, navegaci√≥n de carpetas

### üîß Herramientas de Desarrollo
- **Visual Studio/VS Code**: Trabajo con archivos de proyecto (.csproj, .sln)
- **Package Managers**: NuGet, npm (seg√∫n necesidades)
- **Debugging**: An√°lisis de errores y logs de aplicaci√≥n
- **Testing**: Capacidad para ejecutar y crear tests unitarios

### üîí Seguridad y Autenticaci√≥n
- **Configuraci√≥n JWT**: Manejo de tokens y autenticaci√≥n
- **Hash de contrase√±as**: Implementaci√≥n de BCrypt
- **Manejo de secrets**: Configuraci√≥n de connection strings y claves
- **Validaciones**: Implementaci√≥n de validaciones de datos

### üìä Monitoreo y Logs
- **An√°lisis de logs**: Lectura e interpretaci√≥n de logs de aplicaci√≥n
- **Debugging**: Identificaci√≥n y resoluci√≥n de errores
- **Performance**: Monitoreo de rendimiento de aplicaci√≥n
- **Validaci√≥n**: Verificaci√≥n de funcionalidad implementada

**Nota de Transparencia**: Esta documentaci√≥n se mantiene actualizada para proporcionar visibilidad completa sobre las capacidades y permisos otorgados a Claude Code durante el desarrollo del proyecto BaseApi.

## üîÑ Sistema de Mantenimiento Autom√°tico

Este proyecto implementa un sistema integral de mantenimiento autom√°tico que garantiza la actualizaci√≥n continua de todos los aspectos del desarrollo. Los siguientes elementos se mantienen autom√°ticamente:

### üìö Documentaci√≥n T√©cnica
- ‚úÖ **README.md actualizado autom√°ticamente** con nuevos endpoints y comandos
- ‚úÖ **CLAUDE.md con reglas actualizadas** seg√∫n patrones implementados
- üîÑ **Comentarios XML para Swagger** en todos los controladores
- üîÑ **Changelog autom√°tico** basado en commits sem√°nticos
- üîÑ **Documentaci√≥n de arquitectura** actualizada con cambios estructurales

### üîß Configuraci√≥n y Dependencias
- ‚úÖ **Gesti√≥n de paquetes NuGet** documentada y versionada
- ‚úÖ **Connection strings** configuradas por ambiente
- üîÑ **Variables de entorno** sincronizadas entre dev/staging/prod
- üîÑ **Renovaci√≥n de certificados SSL** autom√°tica
- üîÑ **Configuraci√≥n CORS** adaptativa seg√∫n entornos

### üóÑÔ∏è Base de Datos
- ‚úÖ **Migraciones EF Core** aplicadas autom√°ticamente
- ‚úÖ **Esquema de base de datos** documentado y versionado
- üîÑ **Scripts de datos iniciales** para desarrollo/testing
- üîÑ **Optimizaci√≥n de √≠ndices** seg√∫n patrones de consulta
- üîÑ **Respaldos programados** y rotaci√≥n de logs

### üîí Seguridad
- ‚úÖ **Autenticaci√≥n JWT** implementada con mejores pr√°cticas
- ‚úÖ **Hash de contrase√±as** con BCrypt actualizado
- üîÑ **Rotaci√≥n de secretos JWT** programada
- üîÑ **Escaneo de vulnerabilidades** en dependencias
- üîÑ **Monitoreo de accesos** y logs de seguridad

### üß™ Testing y Calidad
- üîÑ **Tests unitarios** ejecutados en cada commit
- üîÑ **Cobertura de c√≥digo** reportada autom√°ticamente
- üîÑ **Linting y formato** aplicado en build
- üîÑ **Benchmarks de rendimiento** medidos continuamente
- üîÑ **Tests de integraci√≥n E2E** en pipeline CI/CD

### üìä Monitoreo y M√©tricas
- üîÑ **Health checks** de servicios y base de datos
- üîÑ **M√©tricas de performance** (CPU, memoria, respuesta)
- üîÑ **Logs de errores** capturados autom√°ticamente
- üîÑ **Analytics de uso** de endpoints
- üîÑ **Sistema de alertas** por fallos

### üöÄ Deployment y DevOps
- üîÑ **Pipeline CI/CD** completo automatizado
- üîÑ **Contenedores Docker** actualizados autom√°ticamente
- üîÑ **Configuraciones Kubernetes** sincronizadas
- üîÑ **Deploy multi-ambiente** (dev/staging/prod)
- üîÑ **Rollback autom√°tico** en caso de fallos

### üåê Frontend Web
- ‚úÖ **Componentes Shadow DOM** implementados y documentados
- ‚úÖ **Interfaz responsive** con CSS moderno
- üîÑ **Optimizaci√≥n de assets** (minificaci√≥n CSS/JS)
- üîÑ **Testing cross-browser** automatizado
- üîÑ **PWA configuration** actualizada
- üîÑ **Cache invalidation** en deployments

### üìã Gesti√≥n de Proyecto
- ‚úÖ **TODO lists** actualizadas autom√°ticamente durante desarrollo
- üîÑ **Sincronizaci√≥n GitHub Issues** con tareas
- üîÑ **Release notes** generadas autom√°ticamente
- üîÑ **Notificaciones de cambios** importantes
- üîÑ **Asignaci√≥n de code reviewers** autom√°tica

### üîÑ Integraciones Externas
- üîÑ **APIs de terceros** actualizadas autom√°ticamente
- üîÑ **Webhooks** configurados y testeados
- üîÑ **Proveedores OAuth** sincronizados
- üîÑ **Templates de notificaci√≥n** actualizados
- üîÑ **Rate limiting** ajustado seg√∫n uso

## üéØ Estado del Mantenimiento Autom√°tico

**Leyenda:**
- ‚úÖ **Implementado y activo** - Funcionalidad completamente operativa
- üîÑ **Programado para implementaci√≥n** - Ser√° implementado seg√∫n necesidades del proyecto
- ‚ö†Ô∏è **Requiere configuraci√≥n adicional** - Necesita setup espec√≠fico del entorno

### üìà Beneficios del Sistema Autom√°tico
1. **Reducci√≥n de errores humanos** en tareas repetitivas
2. **Consistencia** en aplicaci√≥n de est√°ndares y convenciones
3. **Eficiencia** en el ciclo de desarrollo y deployment
4. **Transparencia** total en cambios y decisiones
5. **Calidad mejorada** mediante testing y monitoreo continuo
6. **Seguridad fortalecida** con actualizaciones proactivas
7. **Documentaci√≥n siempre actualizada** sin intervenci√≥n manual

### üîß Configuraci√≥n del Sistema
El sistema de mantenimiento autom√°tico se activa mediante:
- **Hooks de Git** para ejecuci√≥n en commits/push
- **GitHub Actions** para CI/CD pipeline
- **Cron jobs** para tareas programadas
- **Webhooks** para integraciones externas
- **Monitoring agents** para m√©tricas en tiempo real

**Nota**: Este sistema evoluciona continuamente agregando nuevas capacidades de automatizaci√≥n seg√∫n las necesidades del proyecto.